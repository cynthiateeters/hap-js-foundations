---
/**
 * Operator Playground Demo
 * An interactive demo for Station 5: Making Things Happen with Operators
 * Covers arithmetic, comparison, and helper functions
 */
---

<!doctype html>
<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>Operator Playground - HAP's Demo</title>
    <style>
      :root {
        --hap-orange: hsl(32, 76%, 63%);
        --hap-orange-dark: hsl(32, 76%, 45%);
        --bg-dark: hsl(220, 13%, 18%);
        --bg-card: hsl(220, 13%, 95%);
        --text-dark: hsl(220, 13%, 20%);
        --text-light: hsl(220, 13%, 96%);
        --text-muted: hsl(220, 10%, 50%);
        --border-color: hsl(220, 13%, 80%);
        --arithmetic-color: hsl(210, 70%, 50%);
        --arithmetic-bg: hsl(210, 70%, 95%);
        --comparison-color: hsl(280, 60%, 50%);
        --comparison-bg: hsl(280, 60%, 95%);
        --trap-color: hsl(0, 70%, 50%);
        --trap-bg: hsl(0, 70%, 95%);
        --helper-color: hsl(160, 60%, 40%);
        --helper-bg: hsl(160, 60%, 95%);
        --true-color: hsl(142, 70%, 40%);
        --false-color: hsl(0, 70%, 50%);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family:
          'Segoe UI',
          system-ui,
          -apple-system,
          sans-serif;
        background-color: var(--bg-dark);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem 1rem;
        color: var(--text-light);
      }

      .page-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .page-header h1 {
        font-size: 1.5rem;
        color: var(--hap-orange);
        margin-bottom: 0.5rem;
      }

      .page-header p {
        color: var(--text-muted);
        font-size: 0.9rem;
      }

      .demo-container {
        background-color: var(--bg-card);
        border-radius: 16px;
        max-width: 700px;
        width: 100%;
        overflow: hidden;
        box-shadow: 0 10px 40px hsl(220, 13%, 10%, 0.15);
      }

      .demo-header {
        background: linear-gradient(135deg, var(--hap-orange), var(--hap-orange-dark));
        color: var(--text-light);
        padding: 1rem 1.5rem;
        text-align: center;
      }

      .demo-header h2 {
        font-size: 1.1rem;
        font-weight: 600;
      }

      .section {
        padding: 1.25rem;
        border-bottom: 1px solid var(--border-color);
      }

      .section:last-of-type {
        border-bottom: none;
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid;
      }

      .section-header .icon {
        font-size: 1.25rem;
      }

      .section-header h3 {
        font-size: 0.9rem;
        font-weight: 600;
      }

      /* Arithmetic Section */
      .arithmetic-section {
        background-color: var(--arithmetic-bg);
      }

      .arithmetic-section .section-header {
        border-color: var(--arithmetic-color);
      }

      .arithmetic-section .section-header h3 {
        color: var(--arithmetic-color);
      }

      .operator-row {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: 1rem;
      }

      .number-input {
        width: 70px;
        padding: 0.5rem;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        font-size: 1.1rem;
        text-align: center;
        font-family: 'Consolas', 'Monaco', monospace;
      }

      .number-input:focus {
        outline: none;
        border-color: var(--hap-orange);
      }

      .operator-select {
        padding: 0.5rem 1rem;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        font-size: 1.1rem;
        font-family: 'Consolas', 'Monaco', monospace;
        background: white;
        cursor: pointer;
      }

      .equals-sign {
        font-size: 1.25rem;
        font-weight: bold;
        color: var(--text-dark);
      }

      .result-display {
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 1.5rem;
        font-weight: bold;
        padding: 0.5rem 1rem;
        background: white;
        border-radius: 6px;
        min-width: 80px;
        text-align: center;
      }

      .arithmetic-result {
        color: var(--arithmetic-color);
      }

      /* Comparison Section */
      .comparison-section {
        background-color: var(--comparison-bg);
      }

      .comparison-section .section-header {
        border-color: var(--comparison-color);
      }

      .comparison-section .section-header h3 {
        color: var(--comparison-color);
      }

      .comparison-result {
        font-weight: bold;
      }

      .result-true {
        color: var(--true-color);
      }

      .result-false {
        color: var(--false-color);
      }

      .quick-checks {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: center;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px dashed var(--border-color);
      }

      .quick-check {
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.85rem;
        padding: 0.3rem 0.6rem;
        background: white;
        border-radius: 4px;
      }

      /* Trap Section */
      .trap-section {
        background-color: var(--trap-bg);
      }

      .trap-section .section-header {
        border-color: var(--trap-color);
      }

      .trap-section .section-header h3 {
        color: var(--trap-color);
      }

      .trap-demo {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }

      .trap-card {
        background: white;
        border-radius: 8px;
        padding: 1rem;
        text-align: center;
      }

      .trap-card h4 {
        font-size: 0.8rem;
        color: var(--text-muted);
        margin-bottom: 0.5rem;
      }

      .trap-code {
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 1rem;
        padding: 0.5rem;
        background: hsl(220, 13%, 97%);
        border-radius: 4px;
        margin-bottom: 0.5rem;
        color: black;
      }

      .trap-explanation {
        font-size: 0.8rem;
        color: var(--text-muted);
      }

      .trap-btn {
        margin-top: 1rem;
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 6px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        background-color: var(--trap-color);
        color: white;
        transition: transform 0.15s;
      }

      .trap-btn:hover {
        transform: scale(1.02);
      }

      .trap-result {
        margin-top: 1rem;
        padding: 0.75rem;
        background: white;
        border-radius: 6px;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.85rem;
        color: black;
      }

      /* Helper Section */
      .helper-section {
        background-color: var(--helper-bg);
      }

      .helper-section .section-header {
        border-color: var(--helper-color);
      }

      .helper-section .section-header h3 {
        color: var(--helper-color);
      }

      .helper-grid {
        display: grid;
        gap: 1rem;
      }

      .helper-item {
        background: white;
        border-radius: 8px;
        padding: 1rem;
      }

      .helper-name {
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--helper-color);
        margin-bottom: 0.25rem;
      }

      .helper-desc {
        font-size: 0.8rem;
        color: var(--text-muted);
        margin-bottom: 0.5rem;
        line-height: 1.4;
      }

      .helper-usage {
        font-size: 0.75rem;
        color: var(--text-dark);
        background: hsl(160, 60%, 92%);
        padding: 0.4rem 0.6rem;
        border-radius: 4px;
        margin-bottom: 0.5rem;
      }

      .helper-usage code {
        font-family: 'Consolas', 'Monaco', monospace;
        background: none;
        padding: 0;
      }

      .helper-controls {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
      }

      .helper-btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 6px;
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
        background-color: var(--helper-color);
        color: white;
        transition: transform 0.15s;
      }

      .helper-btn:hover {
        transform: scale(1.05);
      }

      .helper-result {
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 1.1rem;
        font-weight: bold;
        padding: 0.3rem 0.75rem;
        background: hsl(160, 60%, 90%);
        border-radius: 4px;
        color: var(--helper-color);
      }

      .choose-demo {
        margin-top: 0.5rem;
      }

      .choose-call {
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.85rem;
        background: hsl(220, 13%, 97%);
        padding: 0.5rem 0.75rem;
        border-radius: 4px;
        margin-bottom: 0.75rem;
        line-height: 1.6;
      }

      .choose-fn {
        color: var(--helper-color);
        font-weight: 600;
      }

      .choose-param {
        padding: 0.15rem 0.3rem;
        border-radius: 3px;
      }

      #choose-condition-display {
        background: hsl(142, 70%, 90%);
        color: var(--true-color);
        font-weight: 600;
      }

      #choose-condition-display.is-false {
        background: hsl(0, 70%, 92%);
        color: var(--false-color);
      }

      .choose-if-true {
        background: hsl(142, 70%, 90%);
        color: var(--true-color);
        transition: all 0.2s;
      }

      .choose-if-true.highlighted {
        outline: 2px solid var(--true-color);
        font-weight: 600;
      }

      .choose-if-false {
        background: hsl(0, 70%, 92%);
        color: var(--false-color);
        transition: all 0.2s;
      }

      .choose-if-false.highlighted {
        outline: 2px solid var(--false-color);
        font-weight: 600;
      }

      .choose-comma {
        color: var(--text-muted);
      }

      .choose-controls {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
        margin-bottom: 0.5rem;
      }

      .condition-toggle {
        padding: 0.4rem 0.8rem;
        border: 2px solid var(--helper-color);
        border-radius: 6px;
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
        background: white;
        color: var(--helper-color);
        transition: all 0.2s;
      }

      .condition-toggle.active {
        background: var(--helper-color);
        color: white;
      }

      .choose-arrow {
        color: var(--text-muted);
      }

      .choose-explanation {
        font-size: 0.8rem;
        color: var(--text-muted);
        padding: 0.4rem 0.6rem;
        background: hsl(220, 13%, 95%);
        border-radius: 4px;
        border-left: 3px solid var(--helper-color);
      }

      .tip-section {
        padding: 1rem 1.5rem;
        background-color: hsl(32, 76%, 95%);
      }

      .tip-section p {
        font-size: 0.85rem;
        color: var(--text-dark);
      }

      .tip-section strong {
        color: var(--hap-orange-dark);
      }

      .tip-section code {
        background-color: hsl(220, 13%, 90%);
        padding: 0.1rem 0.3rem;
        border-radius: 3px;
        font-size: 0.8rem;
      }

      .back-link {
        margin-top: 1.5rem;
        color: var(--hap-orange);
        text-decoration: none;
        font-size: 0.9rem;
      }

      .back-link:hover {
        text-decoration: underline;
      }

      @media (max-width: 500px) {
        .trap-demo {
          grid-template-columns: 1fr;
        }

        .operator-row {
          gap: 0.3rem;
        }

        .number-input {
          width: 60px;
        }
      }
    </style>
  </head>
  <body>
    <!--
    HAP Educational Content ¬© 2026 Cynthia Teeters. All rights reserved.
    HyBit A. ProtoBot (HAP) character and the apprentice learning methodology are proprietary educational innovations.
    -->

    <header class='page-header'>
      <h1>Operator Playground</h1>
      <p>Experiment with arithmetic, comparison, and helper functions!</p>
    </header>

    <main class='demo-container'>
      <div class='demo-header'>
        <h2>üßÆ Operators in Action</h2>
      </div>

      <!-- Arithmetic Section -->
      <section class='section arithmetic-section'>
        <div class='section-header'>
          <span class='icon'>‚ûï</span>
          <h3>ARITHMETIC</h3>
        </div>

        <div class='operator-row'>
          <input type='number' id='arith-num1' class='number-input' value='15' />
          <select id='arith-op' class='operator-select' onchange='updateArithmetic()'>
            <option value='+'>+</option>
            <option value='-' selected>‚àí</option>
            <option value='*'>√ó</option>
            <option value='/'>/</option>
            <option value='%'>%</option>
          </select>
          <input type='number' id='arith-num2' class='number-input' value='5' />
          <span class='equals-sign'>=</span>
          <span class='result-display arithmetic-result' id='arith-result'>10</span>
        </div>

        <p style='font-size: 0.8rem; color: var(--text-muted); text-align: center;'>
          Try different numbers and operators! The <code>%</code> (modulo) gives the remainder.
        </p>
      </section>

      <!-- Comparison Section -->
      <section class='section comparison-section'>
        <div class='section-header'>
          <span class='icon'>‚öñÔ∏è</span>
          <h3>COMPARISON</h3>
        </div>

        <div class='operator-row'>
          <input type='number' id='comp-num1' class='number-input' value='85' />
          <select id='comp-op' class='operator-select' onchange='updateComparison()'>
            <option value='>' selected>&gt;</option>
            <option value='<'>&lt;</option>
            <option value='>='>‚â•</option>
            <option value='<='>‚â§</option>
            <option value='==='>===</option>
            <option value='!=='>!==</option>
          </select>
          <input type='number' id='comp-num2' class='number-input' value='50' />
          <span class='equals-sign'>=</span>
          <span class='result-display comparison-result result-true' id='comp-result'>true</span>
        </div>

        <div class='quick-checks' id='quick-checks'>
          <!-- Generated by JavaScript -->
        </div>
      </section>

      <!-- The Trap Section -->
      <section class='section trap-section'>
        <div class='section-header'>
          <span class='icon'>‚ö†Ô∏è</span>
          <h3>THE TRAP: = vs ===</h3>
        </div>

        <div class='trap-demo'>
          <div class='trap-card'>
            <h4>ASSIGNMENT (changes value!)</h4>
            <div class='trap-code'>score = 100</div>
            <p class='trap-explanation'>"score GETS 100"</p>
          </div>
          <div class='trap-card'>
            <h4>COMPARISON (checks value)</h4>
            <div class='trap-code'>score === 100</div>
            <p class='trap-explanation'>"Is score equal to 100?"</p>
          </div>
        </div>

        <div style='text-align: center;'>
          <button class='trap-btn' onclick='demonstrateTrap()'>See What Happens with =</button>
        </div>

        <div class='trap-result' id='trap-result' style='display: none;'></div>
      </section>

      <!-- Helper Functions Section -->
      <section class='section helper-section'>
        <div class='section-header'>
          <span class='icon'>üõ†Ô∏è</span>
          <h3>HELPER FUNCTIONS</h3>
        </div>

        <div class='helper-grid'>
          <div class='helper-item'>
            <div class='helper-name'>randomBetween(min, max)</div>
            <div class='helper-desc'>
              Returns a random whole number between <code>min</code> and <code>max</code> (inclusive).
              Great for unpredictable values like daily challenges or dice rolls.
            </div>
            <div class='helper-usage'>
              <strong>Robot ID Card uses:</strong> <code>randomBetween(1, 10)</code> for Challenge Level
            </div>
            <div class='helper-controls'>
              <button class='helper-btn' onclick='rollRandom()'>Roll 1-10</button>
              <span class='helper-result' id='random-result'>?</span>
            </div>
          </div>

          <div class='helper-item'>
            <div class='helper-name'>coinFlip()</div>
            <div class='helper-desc'>
              Returns <code>true</code> or <code>false</code> randomly (50/50 chance).
              Like flipping a coin‚Äîuseful for random yes/no decisions.
            </div>
            <div class='helper-usage'>
              <strong>Example:</strong> <code>const isLucky = coinFlip();</code>
            </div>
            <div class='helper-controls'>
              <button class='helper-btn' onclick='flipCoin()'>Flip</button>
              <span class='helper-result' id='coin-result'>?</span>
            </div>
          </div>

          <div class='helper-item'>
            <div class='helper-name'>choose(condition, ifTrue, ifFalse)</div>
            <div class='helper-desc'>
              Picks between two values based on a condition. If condition is <code>true</code>,
              returns the second parameter. If <code>false</code>, returns the third.
            </div>
            <div class='helper-usage'>
              <strong>Robot ID Card uses:</strong> <code>choose(energyLevel > 50, "Energized!", "Need rest...")</code>
            </div>
            <div class='choose-demo'>
              <div class='choose-call'>
                <span class='choose-fn'>choose(</span>
                <span class='choose-param' id='choose-condition-display'>true</span>
                <span class='choose-comma'>,</span>
                <span class='choose-param choose-if-true' id='choose-true-param'>"Energized!"</span>
                <span class='choose-comma'>,</span>
                <span class='choose-param choose-if-false'>"Need rest..."</span>
                <span class='choose-fn'>)</span>
              </div>
              <div class='choose-controls'>
                <span style='font-size: 0.8rem; color: var(--text-muted);'>Toggle condition:</span>
                <button class='condition-toggle active' id='condition-btn' onclick='toggleCondition()'>true</button>
                <span class='choose-arrow'>‚Üí</span>
                <span class='helper-result' id='choose-result'>"Energized!"</span>
              </div>
              <div class='choose-explanation' id='choose-explanation'>
                Condition is <strong>true</strong>, so we return the <strong style='color: var(--true-color);'>second</strong> parameter.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class='tip-section'>
        <p>
          <strong>üü† HAP's Insight:</strong> These operators and helpers power the Robot ID Card!
          <code>energyLevel - 15</code> drains energy, <code>energyLevel > 50</code> checks my mood, and <code>randomBetween(1, 10)</code> generates daily challenges.
        </p>
      </section>
    </main>

    <a href='/stations/station5/' class='back-link'>‚Üê Back to Station 5</a>

    <script is:inline>
      // Helper functions (same as in the Robot ID Card demo)
      function randomBetween(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      function coinFlip() {
        return Math.random() < 0.5;
      }

      function choose(condition, ifTrue, ifFalse) {
        return condition ? ifTrue : ifFalse;
      }

      // Arithmetic calculator
      function updateArithmetic() {
        const num1 = parseFloat(document.getElementById('arith-num1').value) || 0;
        const num2 = parseFloat(document.getElementById('arith-num2').value) || 0;
        const op = document.getElementById('arith-op').value;
        const resultEl = document.getElementById('arith-result');

        let result;
        switch (op) {
          case '+':
            result = num1 + num2;
            break;
          case '-':
            result = num1 - num2;
            break;
          case '*':
            result = num1 * num2;
            break;
          case '/':
            result = num2 !== 0 ? num1 / num2 : 'Error';
            break;
          case '%':
            result = num2 !== 0 ? num1 % num2 : 'Error';
            break;
        }

        // Format result nicely
        if (typeof result === 'number' && !Number.isInteger(result)) {
          result = parseFloat(result.toFixed(4));
        }

        resultEl.textContent = result;
      }

      // Comparison calculator
      function updateComparison() {
        const num1 = parseFloat(document.getElementById('comp-num1').value) || 0;
        const num2 = parseFloat(document.getElementById('comp-num2').value) || 0;
        const op = document.getElementById('comp-op').value;
        const resultEl = document.getElementById('comp-result');

        let result;
        switch (op) {
          case '>':
            result = num1 > num2;
            break;
          case '<':
            result = num1 < num2;
            break;
          case '>=':
            result = num1 >= num2;
            break;
          case '<=':
            result = num1 <= num2;
            break;
          case '===':
            result = num1 === num2;
            break;
          case '!==':
            result = num1 !== num2;
            break;
        }

        resultEl.textContent = result;
        resultEl.className = 'result-display comparison-result ' + (result ? 'result-true' : 'result-false');

        updateQuickChecks(num1);
      }

      // Quick checks for current value
      function updateQuickChecks(value) {
        const container = document.getElementById('quick-checks');
        const checks = [
          { op: '> 50', result: value > 50 },
          { op: '< 50', result: value < 50 },
          { op: '=== ' + Math.round(value), result: true },
          { op: '!== 100', result: value !== 100 },
        ];

        container.innerHTML = '<span style="font-size: 0.8rem; color: var(--text-muted);">Quick checks for ' + value + ':</span> ';
        checks.forEach((check) => {
          const span = document.createElement('span');
          span.className = 'quick-check';
          span.innerHTML = check.op + '? ' + (check.result ? '<span style="color: var(--true-color)">‚úì</span>' : '<span style="color: var(--false-color)">‚úó</span>');
          container.appendChild(span);
        });
      }

      // The = vs === trap demonstration
      let trapScore = 50;
      function demonstrateTrap() {
        const resultEl = document.getElementById('trap-result');
        resultEl.style.display = 'block';

        // Show what happens when you use = instead of ===
        trapScore = 50; // Reset
        resultEl.innerHTML = `
                <div style="margin-bottom: 0.5rem;"><strong>Before:</strong> score = ${trapScore}</div>
                <div style="margin-bottom: 0.5rem;"><strong>You wrote:</strong> if (score = 100) { ... }</div>
                <div style="margin-bottom: 0.5rem;"><strong>After:</strong> score = 100 <span style="color: var(--trap-color);">‚Üê Score changed!</span></div>
                <div style="margin-bottom: 0.5rem;"><strong>Condition:</strong> <span style="color: var(--true-color);">true</span> (always!)</div>
                <div style="color: var(--trap-color); margin-top: 0.5rem;"><strong>The trap:</strong> = assigns AND returns the value. Since 100 is "truthy," the condition is always true!</div>
            `;
        trapScore = 100; // Show the effect
      }

      // Helper function demos
      function rollRandom() {
        const result = randomBetween(1, 10);
        document.getElementById('random-result').textContent = result;
      }

      function flipCoin() {
        const result = coinFlip();
        document.getElementById('coin-result').textContent = result;
        document.getElementById('coin-result').style.color = result ? 'var(--true-color)' : 'var(--false-color)';
      }

      let chooseCondition = true;
      function toggleCondition() {
        chooseCondition = !chooseCondition;
        const btn = document.getElementById('condition-btn');
        const result = document.getElementById('choose-result');
        const conditionDisplay = document.getElementById('choose-condition-display');
        const trueParam = document.getElementById('choose-true-param');
        const falseParam = document.querySelector('.choose-if-false');
        const explanation = document.getElementById('choose-explanation');

        // Update button
        btn.textContent = chooseCondition ? 'true' : 'false';
        btn.className = 'condition-toggle' + (chooseCondition ? ' active' : '');

        // Update condition in the function call display
        conditionDisplay.textContent = chooseCondition ? 'true' : 'false';
        conditionDisplay.className = 'choose-param' + (chooseCondition ? '' : ' is-false');

        // Highlight which parameter gets returned
        if (chooseCondition) {
          trueParam.classList.add('highlighted');
          falseParam.classList.remove('highlighted');
        } else {
          trueParam.classList.remove('highlighted');
          falseParam.classList.add('highlighted');
        }

        // Update result
        result.textContent = chooseCondition ? '"Energized!"' : '"Need rest..."';
        result.style.color = chooseCondition ? 'var(--true-color)' : 'var(--false-color)';

        // Update explanation
        if (chooseCondition) {
          explanation.innerHTML = 'Condition is <strong>true</strong>, so we return the <strong style="color: var(--true-color);">second</strong> parameter.';
        } else {
          explanation.innerHTML = 'Condition is <strong>false</strong>, so we return the <strong style="color: var(--false-color);">third</strong> parameter.';
        }
      }

      // Add input listeners
      document.getElementById('arith-num1').addEventListener('input', updateArithmetic);
      document.getElementById('arith-num2').addEventListener('input', updateArithmetic);
      document.getElementById('comp-num1').addEventListener('input', updateComparison);
      document.getElementById('comp-num2').addEventListener('input', updateComparison);

      // Initialize
      updateArithmetic();
      updateComparison();
    </script>
  </body>
</html>
